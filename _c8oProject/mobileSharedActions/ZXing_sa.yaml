comment: ZXing SharedAction
↓type [mobile.components.UIStackVariable-1595431416154]: 
  comment: 'Scan from file or video. Default: ''file'''
  value: '''file'''
↓initZxing [mobile.components.UICustomAction-1595431416157]: 
  actionValue: 
    - xmlizable: 
      - ↑classname: com.twinsoft.convertigo.beans.common.FormatedContent
      - com.twinsoft.convertigo.beans.common.FormatedContent: 
        →: |
          '		page.c8o.log.debug(''[MB] ''+ props.actionFunction +'': ''+ props.actionName);
          		const codeReader = new BrowserMultiFormatReader();
          		codeReader.reset();
                  if(vars.type == ''file''){
                      if(event && event.target && event.target.files){
                          let file = event.target.files[0];
                          var reader = new FileReader();
                          reader.onload = function() {
                              if(reader["result"]){
                                  if(vars.imgId && vars.imgId != ""){
                                      vars.imgId.src = reader["result"];
                                  }
                                  codeReader.decodeFromImage(undefined, reader["result"].toString())
                                  .then(res => {
                                      page.c8o.log.debug(''Success: '' + res["text"]);
                                      if(vars.resultId && vars.resultId != ""){
                                          vars.resultId.value =  res["text"];
                                      }
                                      page.local["zxing_result" + vars.local_zxing_suffix] = res;
                                      page.local["local_zxing_suffix"] = vars.local_zxing_suffix;
                                      resolve(res);
                                  })
                                  .catch(err => {
                                      page.c8o.log.warn(''Error: '' + err);
                                      resolve({error: err});
                                  });
          
                              } else {
                                  resolve({error: ''Can not read file''});
                              }
                          }
                          reader.readAsDataURL(file);
                      } else {
                          page.c8o.log.warn(''Error: No file'');
                          resolve({error: ''No file''});
                      }
                  } else {
                      let selectedDeviceId;
                      //let ret = codeReader.addVideoSource(page["vidz"], null);
                      codeReader.getVideoInputDevices()
                      .then((videoInputDevices) => {
                          selectedDeviceId = videoInputDevices[0].deviceId;
                          let videoId = !vars.videoId || vars.videoId == "" ? ''video'' : vars.videoId;
                          codeReader.decodeFromVideoDevice(selectedDeviceId, videoId, (result, err) => {
                              if(result){
                                  page.c8o.log.debug(''Success: '' + result["text"]);
                                  if(vars.resultId && vars.resultId != ""){
                                      vars.resultId.value =  result["text"];
                                  }
                                  codeReader.reset();
                                  resolve(result);
                              }
                              if(err && !(err instanceof NotFoundException)){
                                  page.c8o.log.warn(''Error: '' + err);
                                  resolve({error: err});
                              }
                          });
                      })
                      .catch(err => {
                          page.c8o.log.warn(''>>> Error: '' + err);
                          resolve({error: err});
                      });
                  }
          '
  package_dependencies: 
    - xmlizable: 
      - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
      - com.twinsoft.convertigo.beans.common.XMLVector: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
          - com.twinsoft.convertigo.beans.common.XMLVector: 
            - java.lang.String: 
              - ↑value: '@zxing/library'
            - java.lang.String: 
              - ↑value: 0.17.0
  page_ts_imports: 
    - xmlizable: 
      - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
      - com.twinsoft.convertigo.beans.common.XMLVector: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
          - com.twinsoft.convertigo.beans.common.XMLVector: 
            - java.lang.String: 
              - ↑value: BrowserMultiFormatReader
            - java.lang.String: 
              - ↑value: '@zxing/library'
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
          - com.twinsoft.convertigo.beans.common.XMLVector: 
            - java.lang.String: 
              - ↑value: NotFoundException
            - java.lang.String: 
              - ↑value: '@zxing/library'
  ↓type [mobile.components.UIControlVariable-1595431416160]: 
    varValue: 
      - xmlizable: 
        - ↑classname: com.twinsoft.convertigo.beans.mobile.components.MobileSmartSourceType
        - MobileSmartSourceType: script:params.type
  ↓resultId [mobile.components.UIControlVariable-1595431416163]: 
    varValue: 
      - xmlizable: 
        - ↑classname: com.twinsoft.convertigo.beans.mobile.components.MobileSmartSourceType
        - MobileSmartSourceType: script:params.resultId
  ↓imgId [mobile.components.UIControlVariable-1595431416166]: 
    varValue: 
      - xmlizable: 
        - ↑classname: com.twinsoft.convertigo.beans.mobile.components.MobileSmartSourceType
        - MobileSmartSourceType: script:params.imgId
  ↓videoId [mobile.components.UIControlVariable-1595431416169]: 
    varValue: 
      - xmlizable: 
        - ↑classname: com.twinsoft.convertigo.beans.mobile.components.MobileSmartSourceType
        - MobileSmartSourceType: script:params.videoId
  ↓local_zxing_suffix [mobile.components.UIControlVariable-1595431416172]: 
    varValue: 
      - xmlizable: 
        - ↑classname: com.twinsoft.convertigo.beans.mobile.components.MobileSmartSourceType
        - MobileSmartSourceType: script:params.local_zxing_suffix
  ↓If [mobile.components.UIDynamicAction-1595431416175]: 
    beanData: '{"ionBean":"IfAction","condition":"script:params.zxing_topic && params.zxing_topic != '''' && !parent.out.error"}'
    ↓PublishEvent [mobile.components.UIDynamicAction-1595431416178]: 
      beanData: |
        '{
         "ionBean": "PublishEventAction",
         "topic": "script:params.zxing_topic",
         "data": "script:stack[''initZxing''].out"
        }'
  ↓addResolveOutput [mobile.components.UICustomAction-1595431416181]: 
    actionValue: 
      - xmlizable: 
        - ↑classname: com.twinsoft.convertigo.beans.common.FormatedContent
        - com.twinsoft.convertigo.beans.common.FormatedContent: 
          →: |
            '		page.c8o.log.debug(''[MB] ''+ props.actionFunction +'': ''+ props.actionName);
            		resolve(vars.output);
            '
    ↓output [mobile.components.UIControlVariable-1595431416184]: 
      varValue: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.mobile.components.MobileSmartSourceType
          - MobileSmartSourceType: script:stack['initZxing'].out
↓imgId [mobile.components.UIStackVariable-1595431416187]: 
  comment: Img tag identifier to output image file. Optional
↓videoId [mobile.components.UIStackVariable-1595431416190]: 
  comment: 'Video tag identifier to output video camera. Default: ''video''. Optional'
↓resultId [mobile.components.UIStackVariable-1595431416193]: 
  comment: Input tag identifier to set value to. Optional
↓local_zxing_suffix [mobile.components.UIStackVariable-1595431416196]: 
  comment: 'Suffix for local page variable in case of multiple ZXing package instances. Default: ''''. Optional'
↓zxing_topic [mobile.components.UIStackVariable-1595431416199]: 
  comment: Publish Topic name to use with a Subscribe component. Optional